# 価格比較ツール開発ガイド

## 🎯 概要
いつものお店の商品価格と、店頭で見つけた商品の価格をリアルタイムで比較するWebアプリケーション

## 📱 主要な技術的考慮事項

### 1. レスポンシブデザイン
- **最重要**: スマートフォンでの使用が前提
- 入力フィールドは指で操作しやすいサイズ（最低44px）
- テキストサイズは16px以上（iOSでズーム防止）
- 横画面・縦画面両対応

### 2. データ永続化
- **LocalStorage** を使用して登録商品を保存
- ブラウザを閉じても登録データが残る
- データのエクスポート・インポート機能検討
- バックアップ機能の実装推奨

### 3. ユーザビリティ
- **オートフォーカス**: 価格入力フィールドに自動フォーカス
- **数値入力**: `inputmode="decimal"` で数値キーパッド表示
- **プレースホルダー**: 分かりやすい入力例を表示
- **バリデーション**: リアルタイムでエラー表示

### 4. パフォーマンス
- 計算処理の最適化（大量データ対応）
- 画像の最適化（アイコンはSVGまたはアイコンフォント）
- 不要な再レンダリング防止

## 🔧 技術スタック推奨

### フロントエンド
- **React** または **Vue.js** (コンポーネント化しやすい)
- **Tailwind CSS** (レスポンシブ対応が簡単)
- **TypeScript** (型安全性でバグ予防)

### PWA化検討
- **Service Worker** でオフライン対応
- **Web App Manifest** でアプリライクな体験
- スマホのホーム画面に追加可能

### 状態管理
- 小規模なので React Context または Vuex で十分
- 複雑になる場合は Redux/Zustand 検討

## 📊 データ構造設計

### 商品データ
```javascript
const product = {
  id: string,           // ユニークID
  type: string,         // 商品タイプ
  name: string,         // 商品名（任意）
  store: string,        // 店舗名
  quantity: number,     // 容量・長さ
  count: number,        // 入り数
  price: number,        // 価格
  unitPrice: number,    // 計算済み単価
  createdAt: Date,      // 登録日時
  updatedAt: Date       // 更新日時
}
```

### LocalStorage設計
```javascript
const storageKeys = {
  REGULAR_PRICES: 'priceComparison_regularPrices',
  USER_SETTINGS: 'priceComparison_settings',
  APP_VERSION: 'priceComparison_version'
}
```

## 🛡️ セキュリティ・エラー処理

### 入力値検証
- 数値の範囲チェック（負の値、異常に大きい値）
- 文字列の長さ制限
- XSS対策（入力値のサニタイズ）

### エラーハンドリング
- 計算エラー（0除算など）の適切な処理
- LocalStorage容量制限の考慮
- ネットワークエラー対応（PWA化時）

### データ整合性
- バージョン管理（アプリ更新時のデータ移行）
- 破損データの復旧機能

## 📱 モバイル最適化

### タッチ操作
- ボタンサイズ最適化
- スワイプジェスチャー検討
- 長押し操作の活用

### 入力体験
- 数値キーパッド自動表示
- 入力補完・履歴機能
- 音声入力検討

### パフォーマンス
- 画面遷移アニメーション
- ローディング状態の表示
- バッテリー消費最適化

## 🎨 UIデザイン指針

### カラーパレット
- **成功**: 緑系（お得を表現）
- **警告**: 赤系（割高を表現）
- **中性**: グレー系（情報表示）
- **アクセント**: 青系（アクション）

### タイポグラフィ
- **見出し**: 24px以上、太字
- **本文**: 16px以上
- **補助情報**: 14px以上
- **重要数値**: 大きく、太字で強調

### アイコン
- 直感的で分かりやすいもの
- 文字との組み合わせで理解促進
- サイズ統一（16px, 20px, 24px）

## 🔄 開発フェーズ

### Phase 1: 基本機能
- [ ] 商品タイプ選択
- [ ] 基本情報入力
- [ ] 単価計算
- [ ] 比較表示

### Phase 2: 永続化
- [ ] LocalStorage実装
- [ ] データCRUD操作
- [ ] エラーハンドリング

### Phase 3: UX改善
- [ ] レスポンシブ対応
- [ ] バリデーション
- [ ] アニメーション

### Phase 4: 拡張機能
- [ ] PWA化
- [ ] データエクスポート
- [ ] 統計機能
- [ ] 商品履歴

## ⚠️ 重要な注意点

### 1. 小数点計算の精度
```javascript
// 避けるべき
const result = 0.1 + 0.2; // 0.30000000000000004

// 推奨
const result = Math.round((0.1 + 0.2) * 100) / 100; // 0.3
```

### 2. ユーザビリティテスト
- 実際のユーザー（特に年配の方）でのテスト必須
- 店頭での実証テスト
- 片手操作での使いやすさ確認

### 3. アクセシビリティ
- スクリーンリーダー対応
- キーボード操作対応
- 色以外での情報伝達

### 4. 法的考慮事項
- 個人情報の扱い（店舗名など）
- プライバシーポリシー
- 利用規約

## 🚀 リリース準備

### テスト項目
- [ ] 各ブラウザでの動作確認
- [ ] 様々な画面サイズでの表示確認
- [ ] データ保存・復旧テスト
- [ ] 計算精度テスト
- [ ] 大量データでのパフォーマンステスト

### デプロイメント
- **静的サイト**: Netlify, Vercel, GitHub Pages
- **カスタムドメイン**: SEOとブランディング
- **HTTPS**: セキュリティとPWA要件

### 運用・保守
- ユーザーフィードバック収集仕組み
- アナリティクス設定
- エラー監視システム
- 定期的な機能改善

## 📚 参考リソース

### 技術ドキュメント
- [MDN Web Docs](https://developer.mozilla.org/)
- [React Documentation](https://react.dev/)
- [PWA Documentation](https://web.dev/progressive-web-apps/)

### デザインシステム
- [Material Design](https://material.io/)
- [Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)

### ツール
- **デザイン**: Figma, Adobe XD
- **開発**: VS Code, Chrome DevTools
- **テスト**: Jest, Cypress, Lighthouse

---

**最重要ポイント**: このツールは「店頭での素早い判断」が目的なので、**シンプルさと速さ**を最優先に開発してください。